
VIM笔记
=========

## 基本操作

##### 单词间移动
- `w` 下一個word (word)
- `W` 下一個word(跳过标点)
- `b` 前一個word (backward)
- `B` 前一个word(跳过标点)
- `e` 跳到当前word的尾端 (end)

##### 行内移动
- `0` 跳到当前行的开头，0(第0个字符)
- `^` 跳到当前行第一个非空字符，同正则表达式中的`^`
- `$` 跳到行尾，同正则表达式中的`$`
- `g_` 光标跳到当前行行尾，非空格字符位置
- `J` 将光标所在行与下一行合并

##### 段落移动
- `(` 光标向前移动一句
- `)` 光标向后移动一句
- `{` 上一段(以空行分隔)
- `}` 下一段(以空行分隔)
- `%` 跳到当前对应的括号上(适用各种配对符号)

##### 跳跃移动
- `/xx` 搜索xx，(?xx相反)，然后可以用`n`下一个，`N`上一个移动，
- `#` 向前搜索光标当前所在的字
- `*` 向后搜索光标当前所在的字
- `fx` 在当前行移动到光标之后第一个字符x的位置 f(ind)x
- `gd` 跳到光标所在位置词(word)的定义位置 g(o)d(efine)
- `gg` 到文档顶部，同`[[`
- `G` 到文档底部，同`]]`
- `:x` 跳到第x行(x是行号)
- `Ctrl+e` 向下滚动一行
- `Ctrl+y` 向上滚动一行
- `Ctrl+d` 向下滚动半屏，(down)
- `Ctrl+u` 向上滚动半屏，(up)
- `Ctrl+f` 向下滚动一屏
- `Ctrl+b` 向上滚动一屏
- `Ctrl+o` 临时进入命令模式
- :或/然后按上下箭头可选择某个历史命令

##### 简单修改
- `i` 在光标当前位置向前插入 i(insert)
- `I` 在本行第一个字符前插入
- `a` 在光标当前位置向后插入 a(append)
- `A` 在本行末尾插入
- `o` 向下插入一行
- `O` 向上插入一行
- `map tt O<Esc>j` 向上插入一行快捷键映射
- `r` 替换光标当前位置的字符，不进入插入模式(replace)
- `R` 替换光标前一位置的字符，不进入插入模式
- `s` 替换光标当前位置的字符，并进入插入模式(substitute)
- `S` 删除光标所在行，并进入插入模式
- `:w` 保存
- `:q` 退出
- `:wq` 保存并退出，同`:x`


## 进阶操作

Vim用“verb + modifier + object”语法更高效，即动词+修饰语+对象。

```
- 常用的动词:     v (visual),
                c (change),
                d (delete),
                y (yank/copy).

- 常用修饰词:     i (inside),
                a (around, append),
                t (till..finds a character),
                f (find..like till except including the char),
                / (search..find a string/regex)

- 常用文本对象:   w (word),
                s (sentence)
                p (paragraph)
                b (block/parentheses),
                t (tag, works for html/xml)

【例】
- change current sentence: cis (change inside sentence)
- change a string inside quotes: ci" (change inside quote)
- change until next occurrence of ‘foo’: c/foo (change search next word of foo)
- change everything from here to the letter X: ctX (change til next letter X)
- visually select this paragraph: vap (visual around paragraph)
```

##### 删除
- `x` 删除当前字符，同`dl`
- `X` 删除当前字符的前一个字符，同`dh`
- `dd` 删除当前行(delete)
- `D` 删除光标所在字符及之后的字符
- `dw` 从当前光标下的字符开始删除，直到该词结尾的字符(delete word)，同理还有`d0`,`d$`
- `cw` 从当前光标下的字符开始删除，直到该词结尾的字符，并进入插入模式(change word)，同理还有`c0`,`c$`
- `ctf` 从当前光标下的字符开始删除，知道下一个字符`_`(change the word til the next f)，同c/f
- `diw` 删除当前光标下的词 (delete inside word)
- `ciw` 删除当前光标下的词，并进入插入模式(delete inside word)
- `dj` 删除光标所在行及下一行，末行无效
- `dk` 删除光标所在行及上一行，首行无效
- `dG` 从当前行删除到最后一行
- `dgg` 删除当前行及之前所有行
- `dG` 删除当前行及之后所有行
- `:11,$d` 删除11行及以后所有的行
- `:g/xxx/d` 删除文本中所有包含xxx字符的行

##### 复制粘贴
- `yy` 复制当前行 (yank)，同Y
- `yw` 复制当前光标下的词 (yank word)
- `p` 粘贴在光标所在行之下(paste)
- `P` 粘贴在光标所在行之上
- `6,9 co 12` 复制第6行到第9行，并粘贴到第12行之后
- `"+y` 全文复制

##### 通过标签复制多行
2. 光标移到起始行，输入ma
3. 光标移到结束行，输入mb
4. 光标移到粘贴行，输入mc
4. 然后 :'a,'b co 'c (co改为m就是剪切)

##### 重复操作
- `5w` 相当于按五次`w`键
- `3x` 删除当前光标开始向后三个字符
- `6j` 下移6行，相当于按六次j
- `3J` 大写J,本来是将下一行与当前行合并，加上数量，就是重复操作3次
- `6dw` 删除6个word，同`d6w`
- `2 d` 指定删除第2行，不需要光标移动至该行
- `1,3y` 复制1到3行
- `1,10d` 删除1到10行，同`1,10de`
- `nyy` 从光标所在行算起，向下复制n行，同`nY`
- `ndd` 从光标所在行算起，向下删除n行，同`nD`
- `xp` 交换当前字符和其后一个字符
- `ddp` 交换当前行和其下一行
- `.` 重复上次的命令，可多次使用

###### 高效编辑
- `di"` 光标在""之间，则删除""之间的内容，否则删除最近的""之间的内容，被删除字符进入剪切板
- `ci"` 光标在""之间，则删除""之间的内容，否则删除最近的""之间的内容，并进入插入模式
- `yi(` 光标在()之间，则复制()之间的内容，否则赋值最近的()之间的内容，`ya(`赋值的内容包括()
- `vi[` 光标在[]之间，则选中[]之间的内容
以上三种可以自由组合搭配，效率奇高，i(nner)
- `dtx` 删除字符直到遇见光标之后的第一个`x`字符
- `ytx` 复制字符直到遇见光标之后的第一个`x`字符

##### 标记与宏(macro)
- `ma` 将当前位置标记为a，26个字母均可做标记，`mb`、`mc`等等；
- `'a` 跳转到a标记的位置；
- `'.` 跳到上一次编辑的位置
- `qa` 将之后的所有键盘操作录制下来，直到再次在命令模式按下`q`，并存储在`a`中
- `@a` 执行刚刚记录在`a`里面的键盘操作
- `@@` 执行上一次的macro操作

##### 替换命令
- `:s/old/new` 将当前行中查找到的第一个字符“old” 串替换为“new”
- `:s/old/new/g` 将当前行中查找到的所有字符串“old” 替换为“new”
- `:s/old/new/gc` 将当前行中查找到的所有字符串“old” 替换为“new”，替换前确认(confirm)
- `:#,#s/old/new/g` 在行号“#,#”范围内替换所有的字符串“old”为“new”
- `10,$s/^/    /g` 在第10行到最后一行的每行前面加四个空格，用于缩进。
- `.,$s/^/    /g` 在光标所在行到最后一行的每行前面加四个空格，用于缩进。
- `:%s/old/new/g` 在整个文件范围内替换所有的字符串“old”为“new”
- (:%s/^/#/g 注释整个文档，此法更快)
- `:s/old/new/c` 在替换命令末尾加入c命令，对替换动作提示用户进行确认
- `:1,10s/^/#/g` 在1到10行前加#注释
- `:1,10s/#/^/g` 将1到10行前注释取消
- `:1,10>>` 将1到10行向右移动两个tab
- `:1,20<<` 同上，即向左两个tab

##### 插入模式移动
- inoremap <C-h> <Left>
- inoremap <C-j> <Down>
- inoremap <C-k> <Up>
- inoremap <C-l> <Right>

##### 缩进
- `>>` 向右缩进一次
- `<<` 向左缩进一次
- `==` 自动缩进光标所在行
