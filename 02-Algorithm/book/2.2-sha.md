SHA算法
===

安全哈希算法（Secure Hash Algorithm）主要适用于数字签名标准（Digital Signature Standard DSS）里面定义的数字签名算法（Digital Signature Algorithm DSA）。对于长度小于2^64位的消息，SHA1会产生一个160位的消息摘要。该算法经过加密专家多年来的发展和改进已日益完善，并被广泛使用。该算法的思想是接收一段明文，然后以一种不可逆的方式将它转换成一段（通常更小）密文，也可以简单的理解为取一串输入码（称为预映射或信息），并把它们转化为长度较短、位数固定的输出序列即散列值（也称为信息摘要或信息认证代码）的过程。散列函数值可以说是对明文的一种“指纹”或是“摘要”所以对散列值的数字签名就可以视为对此明文的数字签名。

与MD5一样，SHA算法也基于MD4，虽然原理相同但SHA摘要长度更长，安全性更好，被广泛认可为MD5的替代者。SHA同样能获得一个固定长度的摘要信息。与MD算法区别在于
输入的消息不同，与其对应的摘要信息的差异概率很高。

SHA可分为SHA-1，SHA-224，SHA-256，SHA-384，和SHA-512这几种单向散列算法。
SHA-1，SHA-224和SHA-256适用于长度不超过2^64二进制位的消息。
SHA-384和SHA-512适用于长度不超过2^128二进制位的消息。

### 模型分析

假设软件发布商（甲方）与用户（乙方）分别作为消息发送者与接收者，甲方向乙方发送消息需经过以下几个步骤：

1. 甲方公布消息摘要算法。这个算法可以被其他人获取，包括监听者。
2. 甲方对待发送的消息做摘要处理，并获得摘要信息。
3. 甲方向乙方发送摘要信息。该数字指纹可以被他人获取，包括监听者。
4. 甲方向乙方发送消息，该消息可以是明文，有可能被监听者篡改。
5. 乙方获得消息后，使用甲方提供的消息摘要算法进行摘要处理，获取数字指纹并对比甲方传过来的数字指纹是否匹配。

![alt text](img/2.2-md-sha.png)

### 几种实现方式

- Sun

Sun提供了较为底层的SHA算法实现，如SHA-1，SHA-256，SHA-384，SHA-512。但缺少了对应的进制转换实现。

- Bouncy Castle

在Sun的基础上提供了SHA-224的支持，支持十六进制字符串形式的摘要信息，相当方便。

- Commons Codec

在Sun的基础上支持多重形式的参数，支持十六进制字符串形式的摘要信息，更方便。

综上所述，若在应用中使用SHA算法，但不要求对SHA-224算法提供支持，Commons Codec更合适，
如果只是需要在Sun原有SHA系列算法支持的基础上加入十六进制编码转换，Bouncy Castle和Commons Codec均可。

### SHA-1与MD5比较

因为二者均由MD4导出，SHA-1和MD5彼此很相似。相应的，他们的强度和其他特性也是相似，但还有以下几点不同：
1. 对强行攻击的安全性：最显著和最重要的区别是SHA-1摘要比MD5摘要长32 位。使用强行技术，产生任何一个报文使其摘要等于给定报摘要的难度对MD5是2^128数量级的操作，而对SHA-1则是2^160数量级的操作。这样，SHA-1对强行攻击有更大的强度。
2. 对密码分析的安全性：由于MD5的设计，易受密码分析的攻击，SHA-1显得不易受这样的攻击。
3. 速度：在相同的硬件上，SHA-1的运行速度比MD5慢。
