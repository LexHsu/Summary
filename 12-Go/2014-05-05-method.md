
Method
=========

- 方法总是绑定对象实例，并隐式将实例作为第一实参(receiver)。
- 只能为当前包内命名类型定义方法。
- 参数receiver可任意命名，若方法中未曾使用，可省略参数名。
- 参数receiver类型可以是T或者*T。基类型T不能是接口或者指针。
- 不支持方法重载，receiver只是参数签名的组成部分。
- 可用实例value或者pointer调用全部方法，编译器自动转换。
- 无构造方法，析构方法，通常用简单工厂模式返回对象实例。

```go
type Queue struct {
    elements []interface{}
}

func NewQueue() *Queue {                    // 创建对象实例
    return &Queue{make([]interface{}, 10)}
}

func (*Queue) Push(e interface{}) error {   // 省略receiver参数名
    panic("not implemented")
}

// func (Queue) Push(e int) error {         // Error: method redeclared: Queue.Push
//     panic("not implemented")
// }

func (self *Queue) length() int {           // receiver参数名可以是self，this或其他
    return len(self.elements)
}
```

- 方法不过是一种特殊的函数，只需将其还原，就知道receiver T和*T的区别。

```go
type Data struct{
    x int
}

func (self Data) ValueTest() {                // func ValueTest(self Data);
    fmt.Printf("Value: %p\n", &self)
}

func (self *Data) PointerTest() {             // func PointerTest(self *Data);
    fmt.Printf("Pointer: %p\n", self)
}

func main() {
    d := Data{}
    p := &d
    fmt.Printf("Data: %p\n", p)

}

d.ValueTest()                               // ValueTest(d)
d.PointerTest()                             // PointerTest(&d)
p.ValueTest()                               // ValueTest(*p)
p.PointerTest()                             // PointerTest(p)

// 输出：
Data   : 0x2101ef018
Value  : 0x2101ef028
Pointer: 0x2101ef018
Value  : 0x2101ef030
Pointer: 0x2101ef018
```
