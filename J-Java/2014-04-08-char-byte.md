
字节流与字符流
=========

###概念
Java中IO流分为字符流与字节流。

- 字符流处理的单元为2个字节的Unicode字符，分别操作字符、字符数组或字符串。对多国语言支持较好。如果是中文（文本），常用字符流

- 而字节流处理单元为1个字节，操作字节和字节数组。如果是音频文件、图片、歌曲，常用字节流

所有文件的储存是都是字节（byte）的储存，在磁盘上保留的并不是文件的字符而是先把字符编码成字节，再储存这些字节到磁盘。在读取文件（特别是文本文件）时，也是一个字节一个字节地读取以形成字节序列。

字节流可用于任何类型的对象，包括二进制对象，而字符流只能处理字符或者字符串；字节流提供了处理任何类型的IO操作的功能，但它不能直接处理Unicode字符，而字符流就可以。


###IO流
- 字节流抽象类 InputStream OutputStream，字节流实现类 FileInputStream FileOutputStream 
- 字符流抽象类 Reader Writer，字符流实现类 FileReader FileWriter，带缓冲区的字符流BufferdReader BufferedWriter
- 字节流转换成字符流可用InputSteamReader OutputStreamWriter 

###转换
字节流转化为字符流，实际上就是byte[]转化为String
```java
public String(byte bytes[], String charsetName)
// 通常省略参数字符集编码，默认用操作系统的编码方式
```
字符流转化为字节流，实际上是String转化为byte[]
```java
byte[] String.getBytes(String charsetName)
```
###IO流使用原则
```
原则一、按数据来源（去向）分类：
1.是文件： FileInputStream, FileOutputStream, ( 字节流 )FileReader, FileWriter( 字符流)
2.是 byte[] ： ByteArrayInputStream, ByteArrayOutputStream( 字节流 )
3.是 Char[]: CharArrayReader, CharArrayWriter( 字符流 )
4.是 String: StringBufferInputStream, StringBufferOuputStream ( 字节流 )StringReader, StringWriter( 字符流 )
5.网络数据流： InputStream, OutputStream,( 字节流 ) Reader, Writer( 字符流 )

原则二、按是否格式化输出分：
1.要格式化输出： PrintStream, PrintWriter

原则三、按是否要缓冲分：
1.要缓冲： BufferedInputStream, BufferedOutputStream,( 字节流 ) BufferedReader, BufferedWriter( 字符流 )

原则四、按数据格式分：
1.二进制格式（只要不能确定是纯文本的） : InputStream, OutputStream 及其所有带 Stream 结束的子类
2.纯文本格式（含纯英文与汉字或其他编码方式）； Reader, Writer 及其所有带 Reader, Writer 的子类

原则五、按输入输出分：
1.输入： Reader, InputStream 类型的子类
2.输出： Writer, OutputStream 类型的子类

原则六、特殊需要：
1.从 Stream 到 Reader,Writer 的转换类： InputStreamReader, OutputStreamWriter
2.对象输入输出： ObjectInputStream, ObjectOutputStream
3.进程间通信： PipeInputStream, PipeOutputStream, PipeReader, PipeWriter
4.合并输入： SequenceInputStream
5.更特殊的需要： PushbackInputStream, PushbackReader, LineNumberInputStream, LineNumberReader

通常使用原则如下：
1.考虑最原始的数据格式是什么： 原则四
2.是输入还是输出：原则五
3.是否需要转换流：原则六第1条
4.数据来源（去向）是什么：原则一
5.是否要缓冲：原则三 （特别注明：一定要注意的是 readLine() 是否有定义，有什么比 read, write 更特殊的输入或输出方法）
6.是否要格式化输出：原则二
```

###示例：
1.读取文件，从字节流输入到字符流输入
```java
try {
    // 定义一个指向d:/text.txt的字节流 
    FileInputStream fileInputStream = new FileInputStream("d:/text.txt");
    
    // 字节流转换成InputStreamReader 
    InputStreamReader inputStreamReader = new InputStreamReader(fileInputStream); 
    
    // InputStreamReader转换为带缓存的bufferedReader 
    BufferedReader bufferedReader = new BufferedReader(inputSteamReader); 
    
    // 将读出来的内容赋值给字符 
    String s = null; 
    while ((s = bufferedReader.readLine()) != null) { 
        System.out.println(s);
    }
} catch (IOException e) {
    e.printStackTrace();
}
```
2.写入文件 从字节流输出到字符流输出 
```java
try {
    // 定义一个指向d:/text.txt文件的字节流
    FileOutputStream fileOutputStream = new FileOutputStream("d:/text.txt");
    // 字节流转换为OutputStreamReader
    OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fileOutputStream); 

    // OutputStreamReader转换为带缓存的bufferedReader 
    BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter); 

    bufferedWriter.write(s); 
} catch (IOException e) {
    e.printStackTrace();
} finally {
    bufferedWriter.close(); 
    outputStreamWriter.close(); 
    fileOutputStream.close();
}
```



