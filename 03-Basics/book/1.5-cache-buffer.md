Cache与Buffer
===

cache和buffer虽然都称为缓存，但本质上是有区别的：

### cache

图书管理员帮助读者找到他想要的书，读者想要《Rework》，管理员去书架上去找到该书拿给读者，但是走到书架那里要走很远，且很多人要的是相同的书，因此管理员找了个小推车，当读者还书时，管理员书先放入小推车，当另外一个读者再次需要这本相同的书，就不需要走到书架去拿书，直接在小推车里拿。如果在小推车上找不到读者要的书，还是需要走远路去书架那里找书。无论如何，工作量减少了很多。读者要的书越扎堆，管理员越轻松。在这里，小推车正是起到了 cache 的作用：

1. 小推车里面的书就是 cache 的数据；
2. 你必须根据书名去找书；
3. 读者要的书越扎堆，cache 的命中率越高；
4. 小推车的容量不会比书架的书多（谁会搞个比书架还大的小推车？）。

### buffer

家家户户都有垃圾桶，有垃圾就往垃圾桶里扔，等到垃圾桶满了才拿出去倒。在这里，垃圾桶起到了 buffer 的作用：

1. 垃圾桶里的垃圾就是 buffer 的数据；
2. 等垃圾桶满了才会倒垃圾；
3. 不管你要扔的垃圾是塑料袋还是菜叶还是纸片，不分种类，尽管往垃圾桶扔；
4. 垃圾桶不能太大（你拖不动），垃圾桶也不能太小（太小的垃圾桶一天要倒很多次）。

cache 和 buffer  与两种数据结构很相似：cache 正如 map，buffer 正如 list。
缓存服务器软件 memcache 就是把整台服务器当做一个大 map，通过局域网传输数据。
Java 中的 BufferedInputStream 和 BufferedOutputStream 就是使用了垃圾桶的原理来提高性能。
